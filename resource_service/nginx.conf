# =====================================================================
# ❗ 下面是你的原始 Windows 本地开发配置（已经全部按要求保留并注释）
# =====================================================================

# server {
#     listen 8081 default_server;
#     server_name mofukaze.static.com;

#     allow 127.0.0.1;
#     allow ::1;
#     deny all;

#     location /frontend/ {
#         alias D:/web/Cant/resource_service/resources/frontendGet/;
#         index index.html;
#         autoindex off;
#         expires 7d;
#     }

#     location /img/ {
#         alias D:/web/Cant/resource_service/resources/img/;
#         autoindex on;
#         expires 30d;
#     }

#     location /video/ {
#         alias D:/web/Cant/resource_service/resources/video/;
#         autoindex on;
#         expires 7d;
#     }

#     location /music/ {
#         alias D:/web/Cant/resource_service/resources/music/;
#         autoindex on;
#         expires 30d;
#     }

#     location / {
#         return 404;
#     }
# }

# =====================================================================
# ✨ 下面是 “线上（Docker 容器内）” 的版本
# =====================================================================

server {
    listen 8081 default_server;
    server_name mofukaze.static.com;

    # -----------------------------
    # 建议线上允许全部访问，而不是限制到本机
    # -----------------------------
    allow all;

    # -----------------------------
    # 假设资源会通过 docker-compose 挂载到容器内：
    # /resources/frontendGet/
    # /resources/img/
    # /resources/video/
    # /resources/music/
    # -----------------------------
    location /frontend/ {
        alias /resources/frontendGet/;
        index index.html;
        autoindex off;
        expires 7d;
    }

    location /img/ {
        alias /resources/img/;
        autoindex off;  # 线上不要开启目录浏览
        expires 30d;
    }

    location /video/ {
        alias /resources/video/;
        autoindex off;
        expires 7d;
    }

    location /music/ {
        alias /resources/music/;
        autoindex off;
        expires 30d;
    }

    location / {
        return 404;
    }
}
